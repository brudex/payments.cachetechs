<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="page-title">Create New Application</h1>
                <a href="/dashboard/apps" class="btn btn-outline-primary">
                    <i class="fas fa-arrow-left"></i> Back to Apps
                </a>
            </div>

            <% if (messages.error) { %>
                <div class="alert alert-danger" role="alert">
                    <%= messages.error %>
                </div>
            <% } %>

            <div class="card">
                <div class="card-body">
                    <form action="/dashboard/apps/create" method="POST" id="createAppForm">
                        <!-- App Name -->
                        <div class="mb-3">
                            <label for="appName" class="form-label">Application Name *</label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="appName" 
                                name="appName" 
                                required
                                minlength="3"
                                maxlength="100"
                                hx-get="/dashboard/apps/validate-name"
                                hx-trigger="change"
                                hx-target="next .invalid-feedback"
                            >
                            <div class="invalid-feedback"></div>
                        </div>

                        <!-- Payment Modes -->
                        <%- include('_payment-modes', { paymentModes, defaultModes }) %>

                        <!-- Callback Settings -->
                        <div class="mb-3">
                            <div class="form-check">
                                <input 
                                    class="form-check-input" 
                                    type="checkbox" 
                                    id="shouldSendCallback"
                                    name="shouldSendCallback"
                                    value="true"
                                >
                                <label class="form-check-label" for="shouldSendCallback">
                                    Enable Payment Callbacks
                                </label>
                            </div>
                            
                            <div class="mt-3" id="callbackUrlContainer" style="display: none;">
                                <label for="callbackUrl" class="form-label">Callback URL *</label>
                                <input 
                                    type="url" 
                                    class="form-control" 
                                    id="callbackUrl" 
                                    name="callbackUrl"
                                    placeholder="https://your-domain.com/webhook"
                                    pattern="https?://.+"
                                >
                                <div class="form-text">
                                    URL that will receive payment notifications via POST requests. Must start with http:// or https://
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            Create Application
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include app form JS -->
<script src="/js/app-form.js"></script>